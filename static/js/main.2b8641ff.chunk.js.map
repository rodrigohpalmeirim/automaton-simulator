{"version":3,"sources":["simulation.js","connection.js","arrow.js","node.js","tape.js","json.js","file.js","examples/binary-counter.js","App.js","examples/bouncer.js","serviceWorker.js","index.js"],"names":["interval","createConnection","endNodeId","document","nodes","selectedNodeId","connections","node","newChar","move","arrowCurve","char","Math","abs","d","char2","max","editConnection","nodeId","editingConnection","update","applyConnectionChanges","modifiedChar","getElementsByClassName","value","includes","Object","keys","filter","endNode","tempNode","cancelConnection","id","removeConnection","renderArrow","key","x1","y1","x2","y2","endDistance","text","dx","dy","sqrt","curve","nodeRadius","min","sign","cpx","cpy","dcl1x","dcl1y","dcl1","dcl2x","dcl2y","dcl2","sx","sy","ex","ey","selectedConnectionChar","arrowCenter","x","y","type","onMouseDown","style","stroke","strokeWidth","pointerEvents","fill","points","onDoubleClick","event","button","addEventListener","dragLabel","height","width","rx","ry","fontSize","fontFamily","xmlSpace","cy1","cy2","cx1","cx2","dragArrow","arrowPos","pageX","pageY","startNode","round","dragNode","offset","createNode","i","length","newId","updateTape","tapePos","tapeHeight","firstKey","initChars","chars","window","innerWidth","lastKey","dragTape","tapeMouseDownHandler","loop","state","focusedCharId","connection","querySelector","e","run","startState","setTimeout","running","JSON","parse","stringify","setInterval","speed","stop","clearInterval","startCharId","querySelectorAll","input","getAttribute","changeSpeed","parseJSON","json","TypeError","firstTapePos","lastTapePos","localStorage","getItem","updateJSON","tape","string","startPos","freeEdit","getElementById","readFile","file","callback","Blob","reader","FileReader","target","result","readAsBinaryString","App","props","forceUpdate","mouseUpHandler","bind","mouseDownHandler","keyDownHandler","contextMenuHandler","contextMenu","options","draggingNode","draggingArrow","showContextMenu","setItem","q0","innerHeight","floor","undefined","this","removeEventListener","parentElement","className","shiftKey","nodeMouseDownHandler","activeElement","tagName","ctrlKey","preventDefault","onClick","removeNode","html","position","map","cx","cy","r","textAnchor","renderNode","icon","faQuestionCircle","flexGrow","marginLeft","opacity","cursor","onChange","files","upload","faFileImport","transform","a","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","faFileExport","Number","num","backgroundColor","bottom","left","transition","maxLength","onInput","defaultValue","zIndex","color","Infinity","top","name","autoFocus","onFocus","select","nextElementSibling","focus","faTimes","marginTop","rel","right","faChevronRight","faChevronLeft","faPencilAlt","faCheck","execCommand","getSelection","removeAllRanges","faCopy","spellCheck","option","console","log","Component","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.2b8641ff.chunk.js","sourcesContent":["import { updateTape } from './tape';\n\nvar interval;\n\nfunction loop() {\n    for (const char in document.nodes[document.state].connections) {\n        if (char === document.chars[document.focusedCharId]) {\n            const connection = document.nodes[document.state].connections[char];\n            document.chars[document.focusedCharId] = connection.newChar;\n            try {\n                document.querySelector(\"#tape input[num='\" + document.focusedCharId + \"']\").value = connection.newChar;\n            } catch (e) { }\n            if (connection.move === \"L\") {\n                document.focusedCharId = document.focusedCharId - 1;\n            } else if (connection.move === \"R\") {\n                document.focusedCharId = document.focusedCharId + 1;\n            }\n            document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n            updateTape();\n            document.state = connection.node;\n            document.update();\n            break;\n        }\n    }\n}\n\nexport function run() {\n    if (document.nodes[document.startState]) {\n        document.state = document.startState;\n        document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n        updateTape();\n        document.update();\n        setTimeout(() => { document.running = true; document.update(); }, 1);\n\n        document.chars = JSON.parse(JSON.stringify(document.initChars));\n\n        interval = setInterval(loop, 1000 / document.speed);\n    }\n}\n\nexport function stop() {\n    clearInterval(interval);\n    document.running = false;\n    document.focusedCharId = document.startCharId;\n    document.state = document.startState;\n    for (const input of document.querySelectorAll(\"#tape input\")) {\n        input.value = document.initChars[input.getAttribute(\"num\")];\n    }\n    document.update();\n}\n\nexport function changeSpeed(speed) {\n    document.speed = speed;\n    document.update();\n    if (document.running) {\n        clearInterval(interval);\n        interval = setInterval(loop, 1000 / document.speed);\n    }\n}","export function createConnection(endNodeId) {\n    document.nodes[document.selectedNodeId].connections[\"temp\"] = {\n        node: endNodeId,\n        newChar: \"\",\n        move: \"S\",\n        arrowCurve: 0,\n    }\n    if (document.selectedNodeId !== endNodeId) {\n        for (const char in document.nodes[endNodeId].connections) {\n            if (document.nodes[endNodeId].connections[char].node === document.selectedNodeId) {\n                if (Math.abs(document.nodes[endNodeId].connections[char].arrowCurve) < 25) {\n                    const d = Math.abs(25 - document.nodes[endNodeId].connections[char].arrowCurve);\n                    for (const char2 in document.nodes[endNodeId].connections) {\n                        if (document.nodes[endNodeId].connections[char2].node === document.selectedNodeId && document.nodes[endNodeId].connections[char2].arrowCurve > -25) {\n                            document.nodes[endNodeId].connections[char2].arrowCurve += d;\n                        }\n                    }\n                }\n                document.nodes[document.selectedNodeId].connections[\"temp\"].arrowCurve = 25;\n            }\n        }\n        for (const char in document.nodes[document.selectedNodeId].connections) {\n            if (char !== \"temp\" && document.nodes[document.selectedNodeId].connections[char].node === endNodeId && document.nodes[document.selectedNodeId].connections[char].arrowCurve >= 0)\n                document.nodes[document.selectedNodeId].connections[char].arrowCurve += 50;\n        }\n    } else {\n        for (const char in document.nodes[endNodeId].connections) {\n            if (document.nodes[endNodeId].connections[char].node === document.selectedNodeId && char !== \"temp\") {\n                document.nodes[endNodeId].connections[char].arrowCurve = Math.max(document.nodes[endNodeId].connections[char].arrowCurve + 20, 125);\n            }\n        }\n    }\n    editConnection(document.selectedNodeId, \"temp\");\n}\n\nexport function editConnection(nodeId, char) {\n    document.editingConnection = true;\n    document.editingConnection = { node: nodeId, char: char }\n    document.update();\n}\n\nexport function applyConnectionChanges() {\n    const modifiedChar = document.getElementsByClassName(\"connection-input\")[0].value;\n    const newChar = document.getElementsByClassName(\"connection-input\")[1].value;\n    const move = document.getElementsByClassName(\"connection-input\")[2].value;\n    if ([\"L\", \"R\", \"S\"].includes(move) && !Object.keys(document.nodes[document.editingConnection.node].connections).filter((char) => char !== document.editingConnection.char).includes(modifiedChar)) {\n        const endNode = document.nodes[document.editingConnection.node].connections[document.editingConnection.char].node;\n        const arrowCurve = document.nodes[document.editingConnection.node].connections[document.editingConnection.char].arrowCurve;\n        delete document.nodes[document.editingConnection.node].connections[document.editingConnection.char];\n        document.nodes[document.editingConnection.node].connections[modifiedChar] = {\n            node: endNode,\n            newChar: newChar,\n            move: move,\n            arrowCurve: arrowCurve,\n        }\n        document.tempNode = \"\";\n        return true;\n    }\n    return false;\n}\n\nexport function cancelConnection() {\n    for (const id in document.nodes) {\n        delete document.nodes[id].connections[\"temp\"];\n    }\n    document.editingConnection = false;\n    delete document.nodes[document.tempNode];\n    document.update();\n}\n\nexport function removeConnection(nodeId, char) {\n    delete document.nodes[nodeId].connections[char];\n}","import React from 'react';\nimport { editConnection } from './connection';\n\nexport function renderArrow(key, nodeId, char, x1, y1, x2, y2, endDistance = 0, text = \"\") {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d = Math.sqrt(dx ** 2 + dy ** 2);\n    var curve = nodeId ? document.nodes[nodeId].connections[char].arrowCurve : 0;\n\n    if (d > document.nodeRadius || (nodeId && document.nodes[nodeId].connections[char].node !== nodeId)) {\n        if (d < 150 && Math.abs(curve) < Math.min(150-d, 50))\n            curve = Math.min(150-d, 50) * (curve ? Math.sign(curve) : 1);\n        const cpx = x1 + dx / 2 + dy / d * curve * 1.9;\n        const cpy = y1 + dy / 2 - dx / d * curve * 1.9;\n        const dcl1x = x1 - cpx;\n        const dcl1y = y1 - cpy;\n        const dcl1 = Math.sqrt(dcl1x ** 2 + dcl1y ** 2);\n        const dcl2x = x2 - cpx;\n        const dcl2y = y2 - cpy;\n        const dcl2 = Math.sqrt(dcl2x ** 2 + dcl2y ** 2);\n        const sx = x1 - dcl1x * 30 / dcl1;\n        const sy = y1 - dcl1y * 30 / dcl1;\n        const ex = x2 - dcl2x * (endDistance + 14) / dcl2;\n        const ey = y2 - dcl2y * (endDistance + 14) / dcl2;\n\n        if (document.selectedNodeId === nodeId && document.selectedConnectionChar === char) {\n            document.arrowCenter = {\n                x: ((sx + ex) / 2 + cpx) / 2,\n                y: ((sy + ey) / 2 + cpy) / 2\n            }\n        }\n\n        return (\n            <g key={key} type=\"arrow\" onMouseDown={() => {\n                document.selectedNodeId = nodeId;\n                document.selectedConnectionChar = char;\n            }}>\n                <path d={\"M \" + sx + \" \" + sy + \" Q \" + cpx + \" \" + cpy + \" \" + ex + \" \" + ey} style={{ stroke: \"#88C0D0\", strokeWidth: 5, pointerEvents: \"none\" }} fill=\"transparent\" />\n                <polygon\n                    points={\n                        (x2 - dcl2x * endDistance / dcl2) + \",\" + (y2 - dcl2y * endDistance / dcl2) + \" \" +\n                        (x2 - dcl2x * (endDistance + 15) / dcl2 - 10 * dcl2y / dcl2) + \",\" + (y2 - dcl2y * (endDistance + 15) / dcl2 + 10 * dcl2x / dcl2) + \" \" +\n                        (x2 - dcl2x * (endDistance + 15) / dcl2 + 10 * dcl2y / dcl2) + \",\" + (y2 - dcl2y * (endDistance + 15) / dcl2 - 10 * dcl2x / dcl2)\n                    }\n                    fill=\"#88C0D0\"\n                />\n                {text && (\n                    <g type=\"arrow\"\n                        onDoubleClick={() => { editConnection(nodeId, char) }}\n                        onMouseDown={(event) => { if (event.button === 0) document.addEventListener(\"mousemove\", dragLabel) }}\n                    >\n                        <rect x={((sx + ex) / 2 + cpx) / 2 - 27} y={((sy + ey) / 2 + cpy) / 2 - 10} height=\"20\" width=\"54\" rx=\"5\" ry=\"5\" fill=\"#88C0D0\" />\n                        <text x={((sx + ex) / 2 + cpx) / 2 - 23} y={((sy + ey) / 2 + cpy) / 2 + 5} fontSize=\"15\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\" xmlSpace=\"preserve\">{text}</text>\n                    </g>\n                )}\n            </g>\n        );\n    } else {\n        var sign;\n        const cx1 = x1 - 30;\n        const cx2 = x1 + 30;\n        var cy1;\n        var cy2;\n        x2 = x1 + 20;\n        x1 -= 22;\n        if (curve < 70) {\n            sign = 1;\n            curve = Math.min(curve, 0);\n            cy1 = y1 - 70 + curve * 1.35;\n            cy2 = y1 - 70 + curve * 1.35;\n            y1 = y2 = y1 - 25;\n        } else {\n            sign = -1;\n            curve = Math.max(curve, 125);\n            cy1 = y1 - 100 + curve * 1.35;\n            cy2 = y1 - 100 + curve * 1.35;\n            y1 = y2 = y1 + 25;\n        }\n\n        if (document.selectedNodeId === nodeId && document.selectedConnectionChar === char) {\n            document.arrowCenter = {\n                x: x1 + 20,\n                y: y1 - 63 + 23 * sign + curve\n            }\n        }\n\n        return (\n            <g key={key} type=\"arrow\" onMouseDown={() => {\n                document.selectedNodeId = nodeId;\n                document.selectedConnectionChar = char;\n            }}>\n                <path d={`M ${x1 - 4} ${y1 - 8 * sign} C ${cx1},${cy1} ${cx2},${cy2} ${x2} ${y2}`} style={{ stroke: \"#88C0D0\", strokeWidth: 5, pointerEvents: \"none\" }} fill=\"transparent\" />\n                <polygon points={`${x1},${y1} ${x1 - 13.5},${y1 - 11.9 * sign} ${x1 + 5.78},${y1 - 17.1 * sign}`} fill=\"#88C0D0\" />\n                {text && (\n                    <g type=\"arrow\"\n                        onDoubleClick={() => { editConnection(nodeId, char) }}\n                        onMouseDown={(event) => { if (event.button === 0) document.addEventListener(\"mousemove\", dragLabel) }}\n                    >\n                        <rect x={x1 - 7} y={y1 - 73 + 23 * sign + curve} height=\"20\" width=\"54\" rx=\"5\" ry=\"5\" fill=\"#88C0D0\" />\n                        <text x={x1 - 3} y={y1 - 58 + 23 * sign + curve} fontSize=\"15\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\" xmlSpace=\"preserve\">{text}</text>\n                    </g>\n                )}\n            </g>\n        );\n    }\n}\n\nexport function dragArrow(event) {\n    document.arrowPos = {\n        node: document.selectedNodeId,\n        x1: document.nodes[document.selectedNodeId].x,\n        y1: document.nodes[document.selectedNodeId].y,\n        x2: event.pageX,\n        y2: event.pageY\n    }\n    document.update();\n}\n\nexport function dragLabel(event) {\n    const startNode = document.nodes[document.selectedNodeId];\n    const endNode = document.nodes[document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].node]\n    const x1 = startNode.x;\n    const y1 = startNode.y;\n    const x2 = endNode.x;\n    const y2 = endNode.y;\n\n    if (document.selectedNodeId === document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].node) {\n        document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].arrowCurve = event.pageY - y1 + 64;\n    } else {\n        document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].arrowCurve = Math.round(((y2 - y1) * event.pageX - (x2 - x1) * event.pageY + x2 * y1 - x1 * y2) / Math.sqrt((y2 - y1) ** 2 + (x2 - x1) ** 2));\n    }\n    document.update();\n}","import React from 'react';\nimport { dragArrow } from './arrow';\nimport { removeConnection } from './connection';\n\nexport function renderNode(id) {\n    if (typeof document.nodes[id].x !== \"number\" || typeof document.nodes[id].y !== \"number\")\n        throw TypeError;\n\n    return (\n        <g key={id} id={id} type=\"node\" onMouseDown={() => {\n            document.selectedNodeId = id;\n            document.selectedConnectionChar = \"temp\";\n        }}>\n            <circle cx={document.nodes[id].x} cy={document.nodes[id].y} r={document.nodeRadius} fill={ document.state === id ? \"#E5E9F0\" : \"#88C0D0\"} />\n            <text x={document.nodes[id].x} y={document.nodes[id].y + 6} textAnchor=\"middle\" fontSize=\"20\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\">{id}</text>\n        </g>\n    );\n}\n\nexport function dragNode(event) {\n    document.nodes[document.selectedNodeId].x = event.pageX - document.offset.x;\n    document.nodes[document.selectedNodeId].y = event.pageY - document.offset.y;\n    document.update();\n}\n\nexport function createNode(x, y) {\n    for (var i = 0; i < Object.keys(document.nodes).length; i++) {\n        if (!Object.keys(document.nodes).includes(\"q\" + i))\n            break;\n    }\n    var newId = \"q\" + i;\n    document.nodes[newId] = { x: x, y: y, connections: {} }\n    document.update();\n    return newId;\n}\n\nexport function removeNode(nodeId) {\n    for (const node in document.nodes) {\n        for (const char in document.nodes[node].connections) {\n            if (document.nodes[node].connections[char].node === nodeId) {\n                removeConnection(node, char);\n            }\n        }\n    }\n    delete document.nodes[nodeId];\n}\n\nexport function nodeMouseDownHandler(event) {\n    if (event.button === 0 && event.target.parentElement.getAttribute(\"id\") !== document.tempNode) {\n        document.selectedNodeId = event.target.parentElement.getAttribute(\"id\");\n        document.offset = {\n            x: event.pageX - document.nodes[document.selectedNodeId].x,\n            y: event.pageY - document.nodes[document.selectedNodeId].y\n        };\n        if (!event.shiftKey) {\n            document.draggingNode = true;\n            document.addEventListener(\"mousemove\", dragNode);\n        } else {\n            document.draggingArrow = true;\n            document.addEventListener(\"mousemove\", dragArrow);\n        }\n    }\n}","export function updateTape() {\n    while (-document.tapePos < document.tapeHeight * (document.firstKey + 1)) {\n        document.firstKey--;\n        document.initChars[document.firstKey] = \"\";\n        document.chars[document.firstKey] = \"\";\n    }\n    while (window.innerWidth > document.tapeHeight * document.lastKey + document.tapePos) {\n        document.lastKey++;\n        document.initChars[document.lastKey] = \"\";\n        document.chars[document.lastKey] = \"\";\n    }\n}\n\nexport function dragTape(event) {\n    document.tapePos = event.pageX - document.tapeMouseDownHandler;\n    updateTape();\n    document.update();\n}\n\nexport function tapeMouseDownHandler(event) {\n    if (event.button === 0) {\n        document.tapeMouseDownHandler = event.pageX - document.tapePos;\n        document.addEventListener(\"mousemove\", dragTape);\n    }\n}","import { updateTape } from './tape';\n\nexport function parseJSON(json) {\n    try {\n        json = JSON.parse(json);\n        if (typeof json[\"startState\"] !== \"string\" ||\n            typeof json[\"tape\"][\"string\"] !== \"string\" ||\n            typeof json[\"tape\"][\"startPos\"] !== \"number\") {\n            throw TypeError;\n        }\n        document.startState = json[\"startState\"];\n        document.state = document.startState;\n        document.nodes = json[\"nodes\"];\n        document.initChars = {};\n        document.firstKey = -json[\"tape\"][\"startPos\"];\n        document.firstTapePos = document.firstKey;\n        for (var i = 0; i < json[\"tape\"][\"string\"].length; i++) {\n            document.initChars[i + document.firstTapePos] = json[\"tape\"][\"string\"][i] === \" \" ? \"\" : json[\"tape\"][\"string\"][i];\n        }\n        document.lastKey = i - 1 + document.firstTapePos;\n        document.lastTapePos = document.lastKey;\n        document.startCharId = 0;\n        document.focusedCharId = document.startCharId;\n        updateTape();\n        for (const input of document.querySelectorAll(\"#tape input\")) {\n            input.value = document.initChars[input.getAttribute(\"num\")];\n        }\n    } catch (e) {\n        parseJSON(window.localStorage.getItem(\"json\"));\n    }\n    document.update();\n}\n\nexport function updateJSON() {\n    var tape = \"\";\n    for (var i = document.firstTapePos; i <= document.lastTapePos; i++) {\n        tape += document.initChars[i] === \"\" ? \" \" : document.initChars[i];\n    }\n    const json = JSON.stringify({\n        startState: document.startState,\n        nodes: document.nodes,\n        tape: { string: tape, startPos: -document.firstTapePos + document.startCharId }\n    }, null, 2);\n    try {\n        if (!document.freeEdit)\n            document.getElementById(\"json\").value = json;\n    } catch (e) { }\n    return json;\n}","import { parseJSON } from './json';\n\nexport function readFile(file, callback) {\n    if (!(file instanceof Blob))\n        file = new Blob([file], { type: 'application/json' });\n    var reader = new FileReader();\n    reader.addEventListener('load', (e) => {\n        callback(e.target.result);\n    });\n    reader.readAsBinaryString(file);\n}\n\nexport function upload(event) {\n    if (event.target.files && event.target.files[0]) {\n        readFile(event.target.files[0], parseJSON);\n        event.target.value = \"\";\n    }\n}\n\nexport function download() {\n    const file = new Blob([window.localStorage.getItem(\"json\")], { type: 'application/json' });\n    const a = document.createElement(\"a\");\n    const url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = \"automaton.json\";\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n    }, 0);\n}","export const binaryCounter = `{\n  \"startState\": \"q0\",\n  \"nodes\": {\n    \"q0\": {\n      \"x\": 500,\n      \"y\": 350,\n      \"connections\": {\n        \"0\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 50\n        },\n        \"1\": {\n          \"node\": \"q0\",\n          \"newChar\": \"0\",\n          \"move\": \"L\",\n          \"arrowCurve\": 0\n        },\n        \"\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 25\n        }\n      }\n    },\n    \"q1\": {\n      \"x\": 800,\n      \"y\": 350,\n      \"connections\": {\n        \"0\": {\n          \"node\": \"q1\",\n          \"newChar\": \"0\",\n          \"move\": \"R\",\n          \"arrowCurve\": 125\n        },\n        \"1\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 0\n        },\n        \"\": {\n          \"node\": \"q0\",\n          \"newChar\": \"\",\n          \"move\": \"L\",\n          \"arrowCurve\": 25\n        }\n      }\n    }\n  },\n  \"tape\": {\n    \"string\": \"   \",\n    \"startPos\": 0\n  }\n}`","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight, faChevronLeft, faCopy, faPencilAlt, faCheck, faTimes, faFileImport, faFileExport, faQuestionCircle } from '@fortawesome/free-solid-svg-icons'\nimport './App.css';\nimport { renderNode, dragNode, createNode, removeNode, nodeMouseDownHandler } from './node';\nimport { renderArrow, dragArrow, dragLabel } from './arrow';\nimport { updateTape, dragTape, tapeMouseDownHandler } from './tape';\nimport { createConnection, editConnection, applyConnectionChanges, cancelConnection, removeConnection } from './connection';\nimport { run, stop, changeSpeed } from './simulation';\nimport { parseJSON, updateJSON } from './json';\nimport { upload, download, readFile } from './file';\nimport { binaryCounter } from './examples/binary-counter';\nimport { bouncer } from './examples/bouncer';\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    document.update = () => { this.forceUpdate(); }\n    this.mouseUpHandler = this.mouseUpHandler.bind(this);\n    this.mouseDownHandler = this.mouseDownHandler.bind(this);\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.contextMenuHandler = this.contextMenuHandler.bind(this);\n\n    document.nodeRadius = 25;\n    document.arrowPos = { x1: 0, y1: 0, x2: 0, y2: 0 };\n    document.tempNode = \"\";\n    document.contextMenu = { x: 0, y: 0, options: [] }\n    document.startCharId = 0;\n    document.startState = \"q0\";\n    document.state = \"q0\";\n    document.tapeHeight = 100;\n    document.draggingNode = false;\n    document.draggingArrow = false;\n    document.editingConnection = false;\n    document.showContextMenu = false;\n    document.focusedCharId = document.startCharId;\n    document.state = document.startState;\n    document.running = false;\n    document.firstTapePos = 0;\n    document.lastTapePos = 0;\n    document.selectedConnectionChar = \"temp\";\n    document.freeEdit = false;\n    document.speed = 1;\n\n    if (!window.localStorage.getItem(\"json-pane\"))\n      window.localStorage.setItem(\"json-pane\", window.innerWidth > 1000 ? \"show\" : \"hide\");\n    if (!window.localStorage.getItem(\"help-pane\"))\n      window.localStorage.setItem(\"help-pane\", \"show\");\n\n    document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n\n    document.nodes = {\n      q0: {\n        x: Math.round((window.innerWidth) / 2),\n        y: Math.round((window.innerHeight - document.tapeHeight) / 2),\n        connections: {}\n      }\n    }\n\n    document.initChars = {};\n    document.firstKey = 0;\n    for (var i = Math.floor(-(window.innerWidth / 2) / document.tapeHeight); i < 2 + (window.innerWidth / 2) / document.tapeHeight; i++) {\n      if (document.initChars[i] === undefined)\n        document.initChars[i] = \"\";\n    }\n    document.lastKey = i - 1;\n    document.chars = {};\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.keyDownHandler);\n    window.addEventListener(\"resize\", () => {\n      document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n      if (window.innerWidth < 1000)\n        window.localStorage.setItem(\"json-pane\", \"hide\");\n      updateTape();\n      document.update();\n    });\n    document.addEventListener(\"mouseup\", () => {\n      document.removeEventListener(\"mousemove\", dragTape)\n    });\n    document.addEventListener(\"mousedown\", this.mouseDownHandler);\n    document.addEventListener(\"mouseup\", this.mouseUpHandler);\n    document.addEventListener(\"contextmenu\", this.contextMenuHandler);\n\n    if (window.localStorage.getItem(\"json\"))\n      parseJSON(window.localStorage.getItem(\"json\"));\n  }\n\n  mouseDownHandler(event) {\n    if (event.target.parentElement.id !== \"context-menu\")\n      document.showContextMenu = false;\n    if (document.editingConnection && event.target.className !== \"connection-input\" && event.target.id !== \"connection-box\") {\n      if (applyConnectionChanges()) {\n        document.editingConnection = false;\n      } else {\n        cancelConnection();\n      }\n    }\n    try {\n      if (event.target.parentElement.getAttribute(\"type\") === \"node\") {\n        nodeMouseDownHandler(event);\n      }\n    } catch (e) { }\n    document.tempNode = \"\";\n    document.update();\n  }\n\n  mouseUpHandler(event) {\n    document.removeEventListener(\"mousemove\", dragLabel);\n    if (document.draggingNode) document.removeEventListener(\"mousemove\", dragNode);\n    if (document.draggingArrow) {\n      document.removeEventListener(\"mousemove\", dragArrow);\n      if (event.target.parentElement.getAttribute(\"type\") === \"node\") {\n        createConnection(event.target.parentElement.getAttribute(\"id\"));\n      } else {\n        const newId = createNode(event.pageX, event.pageY);\n        document.tempNode = newId;\n        createConnection(newId);\n      }\n    }\n    document.draggingNode = false;\n    document.draggingArrow = false;\n    document.arrowPos = { x1: 0, y1: 0, x2: 0, y2: 0 }\n    document.update();\n  }\n\n  keyDownHandler(event) {\n    if (document.editingConnection) {\n      if (event.key === \"Enter\" && applyConnectionChanges()) {\n        document.editingConnection = false;\n        document.update();\n      } else if (event.key === \"Escape\") {\n        cancelConnection();\n      }\n    }\n\n    if (document.freeEdit && event.key === \"Escape\") {\n      document.freeEdit = false;\n      document.update();\n    }\n\n    if (document.activeElement.tagName !== \"INPUT\" && document.activeElement.tagName !== \"TEXTAREA\") {\n      if (event.key === \"j\") {\n        window.localStorage.setItem(\"json-pane\", window.localStorage.getItem(\"json-pane\") === \"show\" ? \"hide\" : \"show\");\n        document.freeEdit = false;\n        document.update();\n      }\n\n      if (event.key === \"h\") {\n        window.localStorage.setItem(\"help-pane\", window.localStorage.getItem(\"help-pane\") === \"show\" ? \"hide\" : \"show\");\n        document.update();\n      }\n\n      if (event.key === \" \") {\n        if (document.running)\n          stop();\n        else\n          run();\n      }\n\n      if (document.running && event.key === \"Escape\")\n        stop();\n    }\n\n    if (event.ctrlKey && event.key === \"s\") {\n      event.preventDefault();\n      document.freeEdit = false;\n      parseJSON(document.getElementById(\"json\").value);\n    }\n  }\n\n  contextMenuHandler(event) {\n    document.contextMenu = {\n      x: event.pageX,\n      y: event.pageY,\n      options: []\n    }\n    try {\n      if (event.target.tagName === \"svg\") { // Background\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { createNode(document.contextMenu.x, document.contextMenu.y) }}>Add node</p>\n        ];\n      } else if (event.target.parentElement.getAttribute(\"type\") === \"arrow\") { // Connection\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { editConnection(document.selectedNodeId, document.selectedConnectionChar) }}>Edit connection</p>,\n          <p key=\"1\" onClick={() => { removeConnection(document.selectedNodeId, document.selectedConnectionChar) }}>Remove connection</p>\n        ];\n      } else if (event.target.parentElement.getAttribute(\"type\") === \"node\") { // Node\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { removeNode(document.selectedNodeId) }}>Remove node</p>,\n          <p key=\"1\" onClick={() => { document.startState = document.state = document.selectedNodeId }}>Define as start state</p>\n        ];\n      }\n    } catch (e) { }\n    document.update();\n  }\n\n  render() {\n    var html = (\n      <div className=\"App\">\n        <header className=\"App-header\"></header>\n      </div>\n    );\n    try {\n      html = (\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <svg style={{ height: \"100%\", width: \"100%\", position: \"absolute\" }}>\n              {Object.keys(document.nodes).map((id) => {\n                return Object.keys(document.nodes[id].connections).map((char, key) => {\n                  if (\n                    (char.length > 1 && char !== \"temp\") ||\n                    typeof document.nodes[id].connections[char].newChar !== \"string\" ||\n                    document.nodes[id].connections[char].newChar.length > 1 ||\n                    typeof document.nodes[id].connections[char].move !== \"string\" ||\n                    typeof document.nodes[id].connections[char].arrowCurve !== \"number\" ||\n                    ![\"L\", \"R\", \"S\"].includes(document.nodes[id].connections[char].move)\n                  )\n                    throw TypeError;\n\n                  return renderArrow(\n                    key,\n                    id,\n                    char,\n                    document.nodes[id].x,\n                    document.nodes[id].y,\n                    document.nodes[document.nodes[id].connections[char].node].x,\n                    document.nodes[document.nodes[id].connections[char].node].y,\n                    30,\n                    (char === \"temp\") ? \"\" : (char ? char : \" \") + \"\" + (document.nodes[id].connections[char].newChar ? document.nodes[id].connections[char].newChar : \" \") + \",\" + document.nodes[id].connections[char].move\n                  );\n                });\n              })}\n              {document.draggingArrow && renderArrow(\"user\", \"\", \"\", document.arrowPos.x1, document.arrowPos.y1, document.arrowPos.x2, document.arrowPos.y2)}\n              {Object.keys(document.nodes).map((id) => renderNode(id))}\n            </svg>\n            <div className=\"topbar\">\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }} onClick={() => { window.localStorage.setItem(\"help-pane\", window.localStorage.getItem(\"help-pane\") === \"show\" ? \"hide\" : \"show\"); document.update(); }}>\n                <FontAwesomeIcon icon={faQuestionCircle} />\n                <span className=\"tooltip\">Help</span>\n              </div>\n              <div style={{ flexGrow: 1 }}></div>\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }}>\n                <input type=\"file\" text=\"\" style={{ position: \"absolute\", width: 50, height: 50, marginLeft: -10, opacity: 0, cursor: \"pointer\" }} onChange={(event) => { upload(event) }} />\n                <FontAwesomeIcon icon={faFileImport} />\n                <span className=\"tooltip\" style={{ transform: \"translate(calc(-50% - 10px), 200%)\" }}>Import</span>\n              </div>\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }} onClick={() => download()}>\n                <FontAwesomeIcon icon={faFileExport} />\n                <span className=\"tooltip\" style={{ transform: \"translate(calc(-50% - 22px), 200%)\" }}>Export</span>\n              </div>\n            </div>\n            <div id=\"tape\" style={{ height: document.tapeHeight }} onMouseDown={tapeMouseDownHandler}>\n              {\n                Object.keys(document.initChars).map((id) => {\n                  if (-document.tapePos < document.tapeHeight * (Number(id) + 2) && window.innerWidth > document.tapeHeight * (Number(id) - 1) + document.tapePos) {\n                    return (<input key={id} num={id} style={{\n                      height: document.tapeHeight,\n                      width: document.tapeHeight,\n                      backgroundColor: id % 2 ? \"#434C5E\" : \"#3B4252\",\n                      position: \"absolute\",\n                      bottom: 0,\n                      left: id * document.tapeHeight + document.tapePos,\n                      fontSize: document.tapeHeight / 2,\n                      transition: document.running ? 0.5 / document.speed + \"s\" : 0 + \"s\",\n                    }} maxLength=\"1\" onInput={(event) => {\n                      if (event.target.value === \" \")\n                        event.target.value = \"\";\n                      document.initChars[id] = event.target.value;\n                      document.firstTapePos = Math.min(id, document.firstTapePos);\n                      document.lastTapePos = Math.max(id, document.lastTapePos);\n                      updateJSON();\n                    }} defaultValue={document.running ? document.chars[id] : document.initChars[id]} />\n                    )\n                  }\n                })\n              }\n              <div id=\"cursor\" style={{\n                height: document.tapeHeight - 20,\n                width: document.tapeHeight - 20,\n                left: document.running ? window.innerWidth / 2 - document.tapeHeight / 2 : document.focusedCharId * document.tapeHeight + document.tapePos,\n                transition: document.running ? \".5s\" : \"0s\",\n              }} />\n            </div>\n            {!document.running && (\n              <div className=\"button\" style={{ bottom: document.tapeHeight + 20 }} onClick={() => run()}>\n                <svg width=\"100%\" height=\"100%\">\n                  <polygon points={\"12,10 30,20 12,30\"} fill=\"#2E3440\" />\n                </svg>\n              </div>\n            )}\n            <div id=\"speed-controls\" style={{ bottom: document.tapeHeight + 20, zIndex: document.running ? 2 : 0 }}>\n              <div style={document.speed === 0.5 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(0.5); }}></div>\n              <div style={document.speed === 1 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(1); }}>1</div>\n              <div style={document.speed === 2 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(2); }}>2</div>\n              <div style={document.speed === 5 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(5); }}>5</div>\n              <div style={document.speed === Infinity ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(Infinity); }}></div>\n            </div>\n            {document.editingConnection && (\n              <form id=\"connection-box\" style={{ left: document.arrowCenter.x, top: document.arrowCenter.y }}>\n                <input className=\"connection-input\" type=\"text\" name=\"char\" maxLength=\"1\" autoFocus\n                  onFocus={(event) => {event.target.select();}}\n                  onInput={(event) => { event.target.nextElementSibling.focus(); if (event.target.value === \" \") event.target.value = \"\" }}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.selectedConnectionChar : \"\"}\n                />  <input className=\"connection-input\" type=\"text\" name=\"newChar\" maxLength=\"1\"\n                  onFocus={(event) => {event.target.select();}}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].newChar : \"\"}\n                  onInput={(event) => { event.target.nextElementSibling.focus(); if (event.target.value === \" \") event.target.value = \"\" }}\n                />, <input className=\"connection-input\" type=\"text\" name=\"move\" maxLength=\"1\"\n                  onFocus={(event) => {event.target.select();}}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].move : \"\"}\n                />\n              </form>\n            )}\n            <div className=\"pane\" style={{ height: 450, width: 350, top: 100, left: window.localStorage.getItem(\"help-pane\") === \"show\" ? 20 : -400 }}>\n              <div className=\"toolbar\">\n                <span style={{ flexGrow: 1 }}>Help</span>\n                <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"help-pane\", \"hide\"); document.update(); }}>\n                  <FontAwesomeIcon icon={faTimes} />\n                </div>\n              </div>\n              <div className=\"pane-content\">\n                <p style={{ marginTop: 0 }}>Create connections by pressing <span className=\"key\">Shift</span> and dragging from a node.</p>\n                <p>Connections hold 3 values:<br />\n                  - the current character<br />\n                  - the replacement character<br />\n                  - the movement instruction\n                </p>\n                <p>The movement instructions are:<br />\n                  - 'R' (right)<br />\n                  - 'L' (left)<br />\n                  - 'S' (stay)\n                </p>\n                <p>Currently, there cannot be two connections with the same character comming from the same node.</p>\n                <p>Learn about Turing machines <a className=\"link\" href=\"https://simple.m.wikipedia.org/wiki/Turing_machine\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n                <p>Curve the arrows by dragging the label.</p>\n                <p>On the right side there is the JSON pane which you can toggle by pressing <span className=\"key\">J</span>. It contains all the information that defines the automaton and the tape. Unless the 'free edit' mode is enabled, it ignores any input that would break the JSON or the automaton.</p>\n                <p>Start the simulation by pressing <span className=\"key\">Space</span> and control its speed using the buttons on the bottom right corner.</p>\n                <p>Here are some examples:<br />\n                  - <span className=\"link\" onClick={() => readFile(bouncer, parseJSON)}>Bouncer</span><br />\n                  - <span className=\"link\" onClick={() => readFile(binaryCounter, parseJSON)}>Binary counter</span>\n                </p>\n              </div>\n            </div>\n            <div className=\"blocker\" style={{ opacity: document.freeEdit ? 0.5 : 0, pointerEvents: document.freeEdit ? \"auto\" : \"none\" }} />\n            <div className=\"pane\" style={{\n              top: 100,\n              height: window.innerHeight - document.tapeHeight - 200,\n              right: window.localStorage.getItem(\"json-pane\") === \"show\" ? 20 : -360,\n            }}>\n              <div className=\"toolbar\">\n                {window.localStorage.getItem(\"json-pane\") === \"show\" ?\n                  <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"json-pane\", \"hide\"); document.freeEdit = false; document.update(); }}>\n                    <FontAwesomeIcon icon={faChevronRight} />\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"json-pane\", \"show\"); document.update(); }}>\n                    <FontAwesomeIcon icon={faChevronLeft} />\n                  </div>\n                }\n                <span style={{ flexGrow: 1 }}>JSON</span>\n                {document.freeEdit ?\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = false; document.update(); }}>\n                    <FontAwesomeIcon icon={faTimes} />\n                    <span className=\"tooltip\">Cancel</span>\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = true; document.update(); }}>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                    <span className=\"tooltip\">Free edit</span>\n                  </div>\n                }\n                {document.freeEdit ?\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = false; parseJSON(document.getElementById(\"json\").value); }}>\n                    <FontAwesomeIcon icon={faCheck} />\n                    <span className=\"tooltip\">Apply</span>\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => {\n                    document.getElementById(\"json\").select();\n                    document.execCommand(\"copy\");\n                    window.getSelection().removeAllRanges();\n                  }}>\n                    <FontAwesomeIcon icon={faCopy} />\n                    <span className=\"tooltip\">Copy</span>\n                  </div>\n                }\n              </div>\n              <textarea className=\"pane-content\" id=\"json\" onInput={() => { if (!document.freeEdit) parseJSON(document.getElementById(\"json\").value) }} defaultValue={updateJSON()} spellCheck=\"false\" />\n            </div>\n            <div className=\"blocker\" style={{ opacity: 0, pointerEvents: document.running ? \"auto\" : \"none\" }} />\n            {document.running && (\n              <div className=\"button\" style={{ bottom: document.tapeHeight + 20 }} onClick={() => stop()}>\n                <svg width=\"100%\" height=\"100%\">\n                  <polygon points={\"12,12 28,12 28,28 12,28\"} fill=\"#2E3440\" />\n                </svg>\n              </div>\n            )}\n            {document.showContextMenu && (\n              <div style={{ left: document.contextMenu.x, top: document.contextMenu.y }} id=\"context-menu\" onClick={() => { document.showContextMenu = false; document.update(); }}>\n                {document.contextMenu.options.map((option) => option)}\n              </div>\n            )}\n          </header>\n        </div>\n      );\n    } catch (e) {\n      console.log(\"DEBUG: \" + e);\n      parseJSON(window.localStorage.getItem(\"json\"));\n    }\n    return html;\n  }\n\n  componentDidUpdate() {\n    window.localStorage.setItem(\"json\", updateJSON());\n  }\n}","export const bouncer = `{\n  \"startState\": \"q0\",\n  \"nodes\": {\n      \"q0\": {\n      \"x\": 500,\n      \"y\": 350,\n      \"connections\": {\n          \"\": {\n          \"node\": \"q0\",\n          \"newChar\": \"\",\n          \"move\": \"L\",\n          \"arrowCurve\": 0\n          },\n          \"|\": {\n          \"node\": \"q1\",\n          \"newChar\": \"|\",\n          \"move\": \"R\",\n          \"arrowCurve\": 25\n          }\n      }\n      },\n      \"q1\": {\n      \"x\": 750,\n      \"y\": 350,\n      \"connections\": {\n          \"|\": {\n          \"node\": \"q0\",\n          \"newChar\": \"|\",\n          \"move\": \"L\",\n          \"arrowCurve\": 25\n          },\n          \"\": {\n          \"node\": \"q1\",\n          \"newChar\": \"\",\n          \"move\": \"R\",\n          \"arrowCurve\": 0\n          }\n      }\n      }\n  },\n  \"tape\": {\n      \"string\": \"|     |\",\n      \"startPos\": 3\n  }\n}`","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}