{"version":3,"sources":["simulation.js","connection.js","arrow.js","node.js","tape.js","json.js","viewport.js","file.js","App.js","examples/bouncer.js","examples/binary-counter.js","serviceWorker.js","index.js"],"names":["interval","createConnection","endNodeId","document","nodes","selectedNodeId","connections","node","newChar","move","arrowCurve","char","Math","abs","d","char2","max","editConnection","nodeId","editingConnection","update","applyConnectionChanges","modifiedChar","getElementsByClassName","value","includes","Object","keys","filter","endNode","tempNode","cancelConnection","id","removeConnection","renderArrow","key","x1","y1","x2","y2","endDistance","text","dx","dy","sqrt","curve","nodeRadius","min","sign","cpx","cpy","dcl1x","dcl1y","dcl1","dcl2x","dcl2y","dcl2","sx","sy","ex","ey","selectedConnectionChar","arrowCenter","x","y","type","onMouseDown","style","stroke","strokeWidth","pointerEvents","fill","points","onDoubleClick","event","button","addEventListener","dragLabel","height","width","rx","ry","fontSize","fontFamily","xmlSpace","cy1","cy2","cx1","cx2","dragArrow","arrowPos","viewportPos","pageX","pageY","startNode","round","dragNode","nodeOffset","createNode","i","length","newId","updateTape","tapePos","tapeHeight","firstKey","initChars","chars","window","innerWidth","lastKey","dragTape","tapeMouseDownHandler","loop","stalled","state","focusedCharId","connection","querySelector","e","run","startState","setTimeout","running","JSON","parse","stringify","setInterval","speed","stop","clearInterval","startCharId","querySelectorAll","input","getAttribute","changeSpeed","parseJSON","json","TypeError","firstTapePos","lastTapePos","firstUpdate","localStorage","removeItem","reset","getItem","updateJSON","tape","string","startPos","freeEdit","getElementById","centerViewport","minX","maxX","minY","innerHeight","maxY","console","log","pan","offset","readFile","file","callback","Blob","reader","FileReader","target","result","readAsBinaryString","draggingNode","draggingArrow","showContextMenu","setItem","q0","floor","undefined","App","props","forceUpdate","mouseUpHandler","bind","mouseDownHandler","keyDownHandler","contextMenuHandler","svgMouseDownHandler","contextMenu","options","this","removeEventListener","parentElement","className","shiftKey","nodeMouseDownHandler","tagName","activeElement","ctrlKey","navigator","clipboard","writeText","preventDefault","onClick","removeNode","html","position","map","cx","cy","r","textAnchor","renderNode","icon","faQuestionCircle","open","faBug","flexGrow","marginLeft","opacity","cursor","onChange","files","upload","faFileImport","transform","a","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","faFileExport","Number","num","backgroundColor","bottom","left","transition","maxLength","onInput","defaultValue","borderColor","zIndex","color","Infinity","top","name","autoFocus","onFocus","select","nextElementSibling","focus","faTimes","marginTop","rel","right","faChevronRight","faChevronLeft","faPencilAlt","faCheck","faCopy","spellCheck","option","Component","Boolean","location","hostname","match","ReactDOM","render","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.3e6e2746.chunk.js","sourcesContent":["import { updateTape } from './tape';\n\nvar interval;\n\nfunction loop() {\n    document.stalled = true;\n    for (const char in document.nodes[document.state].connections) {\n        if (char === document.chars[document.focusedCharId]) {\n            document.stalled = false;\n            const connection = document.nodes[document.state].connections[char];\n            document.chars[document.focusedCharId] = connection.newChar;\n            try {\n                document.querySelector(\"#tape input[num='\" + document.focusedCharId + \"']\").value = connection.newChar;\n            } catch (e) { }\n            if (connection.move === \"L\") {\n                document.focusedCharId = document.focusedCharId - 1;\n            } else if (connection.move === \"R\") {\n                document.focusedCharId = document.focusedCharId + 1;\n            }\n            document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n            updateTape();\n            document.state = connection.node;\n            document.update();\n            break;\n        }\n    }\n    document.update();\n}\n\nexport function run() {\n    if (document.nodes[document.startState]) {\n        document.state = document.startState;\n        document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n        updateTape();\n        document.update();\n        setTimeout(() => { document.running = true; document.update(); }, 1);\n\n        document.chars = JSON.parse(JSON.stringify(document.initChars));\n\n        interval = setInterval(loop, 1000 / document.speed);\n    }\n}\n\nexport function stop() {\n    clearInterval(interval);\n    document.running = false;\n    document.stalled = false;\n    document.focusedCharId = document.startCharId;\n    document.state = document.startState;\n    for (const input of document.querySelectorAll(\"#tape input\")) {\n        input.value = document.initChars[input.getAttribute(\"num\")];\n    }\n    document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n    updateTape();\n    document.update();\n}\n\nexport function changeSpeed(speed) {\n    document.speed = speed;\n    document.update();\n    if (document.running) {\n        clearInterval(interval);\n        interval = setInterval(loop, 1000 / document.speed);\n    }\n}","export function createConnection(endNodeId) {\n    document.nodes[document.selectedNodeId].connections[\"temp\"] = {\n        node: endNodeId,\n        newChar: \"\",\n        move: \"S\",\n        arrowCurve: 0,\n    }\n    if (document.selectedNodeId !== endNodeId) {\n        for (const char in document.nodes[endNodeId].connections) {\n            if (document.nodes[endNodeId].connections[char].node === document.selectedNodeId) {\n                if (Math.abs(document.nodes[endNodeId].connections[char].arrowCurve) < 25) {\n                    const d = Math.abs(25 - document.nodes[endNodeId].connections[char].arrowCurve);\n                    for (const char2 in document.nodes[endNodeId].connections) {\n                        if (document.nodes[endNodeId].connections[char2].node === document.selectedNodeId && document.nodes[endNodeId].connections[char2].arrowCurve > -25) {\n                            document.nodes[endNodeId].connections[char2].arrowCurve += d;\n                        }\n                    }\n                }\n                document.nodes[document.selectedNodeId].connections[\"temp\"].arrowCurve = 25;\n            }\n        }\n        for (const char in document.nodes[document.selectedNodeId].connections) {\n            if (char !== \"temp\" && document.nodes[document.selectedNodeId].connections[char].node === endNodeId && document.nodes[document.selectedNodeId].connections[char].arrowCurve >= 0)\n                document.nodes[document.selectedNodeId].connections[char].arrowCurve += 50;\n        }\n    } else {\n        for (const char in document.nodes[endNodeId].connections) {\n            if (document.nodes[endNodeId].connections[char].node === document.selectedNodeId && char !== \"temp\") {\n                document.nodes[endNodeId].connections[char].arrowCurve = Math.max(document.nodes[endNodeId].connections[char].arrowCurve + 20, 125);\n            }\n        }\n    }\n    editConnection(document.selectedNodeId, \"temp\");\n}\n\nexport function editConnection(nodeId, char) {\n    document.editingConnection = true;\n    document.editingConnection = { node: nodeId, char: char }\n    document.update();\n}\n\nexport function applyConnectionChanges() {\n    const modifiedChar = document.getElementsByClassName(\"connection-input\")[0].value;\n    const newChar = document.getElementsByClassName(\"connection-input\")[1].value;\n    const move = document.getElementsByClassName(\"connection-input\")[2].value;\n    if ([\"L\", \"R\", \"S\"].includes(move) && !Object.keys(document.nodes[document.editingConnection.node].connections).filter((char) => char !== document.editingConnection.char).includes(modifiedChar)) {\n        const endNode = document.nodes[document.editingConnection.node].connections[document.editingConnection.char].node;\n        const arrowCurve = document.nodes[document.editingConnection.node].connections[document.editingConnection.char].arrowCurve;\n        delete document.nodes[document.editingConnection.node].connections[document.editingConnection.char];\n        document.nodes[document.editingConnection.node].connections[modifiedChar] = {\n            node: endNode,\n            newChar: newChar,\n            move: move,\n            arrowCurve: arrowCurve,\n        }\n        document.tempNode = \"\";\n        return true;\n    }\n    return false;\n}\n\nexport function cancelConnection() {\n    for (const id in document.nodes) {\n        delete document.nodes[id].connections[\"temp\"];\n    }\n    document.editingConnection = false;\n    delete document.nodes[document.tempNode];\n    document.update();\n}\n\nexport function removeConnection(nodeId, char) {\n    delete document.nodes[nodeId].connections[char];\n}","import React from 'react';\nimport { editConnection } from './connection';\n\nexport function renderArrow(key, nodeId, char, x1, y1, x2, y2, endDistance = 0, text = \"\") {\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var d = Math.sqrt(dx ** 2 + dy ** 2);\n    var curve = nodeId ? document.nodes[nodeId].connections[char].arrowCurve : 0;\n\n    if (d > document.nodeRadius || (nodeId && document.nodes[nodeId].connections[char].node !== nodeId)) {\n        if (d < 150 && Math.abs(curve) < Math.min(150-d, 50))\n            curve = Math.min(150-d, 50) * (curve ? Math.sign(curve) : 1);\n        const cpx = x1 + dx / 2 + dy / d * curve * 1.9;\n        const cpy = y1 + dy / 2 - dx / d * curve * 1.9;\n        const dcl1x = x1 - cpx;\n        const dcl1y = y1 - cpy;\n        const dcl1 = Math.sqrt(dcl1x ** 2 + dcl1y ** 2);\n        const dcl2x = x2 - cpx;\n        const dcl2y = y2 - cpy;\n        const dcl2 = Math.sqrt(dcl2x ** 2 + dcl2y ** 2);\n        const sx = x1 - dcl1x * 30 / dcl1;\n        const sy = y1 - dcl1y * 30 / dcl1;\n        const ex = x2 - dcl2x * (endDistance + 14) / dcl2;\n        const ey = y2 - dcl2y * (endDistance + 14) / dcl2;\n\n        if (document.selectedNodeId === nodeId && document.selectedConnectionChar === char) {\n            document.arrowCenter = {\n                x: ((sx + ex) / 2 + cpx) / 2,\n                y: ((sy + ey) / 2 + cpy) / 2\n            }\n        }\n\n        return (\n            <g key={key} type=\"arrow\" onMouseDown={() => {\n                document.selectedNodeId = nodeId;\n                document.selectedConnectionChar = char;\n            }}>\n                <path d={\"M \" + sx + \" \" + sy + \" Q \" + cpx + \" \" + cpy + \" \" + ex + \" \" + ey} style={{ stroke: \"#88C0D0\", strokeWidth: 5, pointerEvents: \"none\" }} fill=\"transparent\" />\n                <polygon\n                    points={\n                        (x2 - dcl2x * endDistance / dcl2) + \",\" + (y2 - dcl2y * endDistance / dcl2) + \" \" +\n                        (x2 - dcl2x * (endDistance + 15) / dcl2 - 10 * dcl2y / dcl2) + \",\" + (y2 - dcl2y * (endDistance + 15) / dcl2 + 10 * dcl2x / dcl2) + \" \" +\n                        (x2 - dcl2x * (endDistance + 15) / dcl2 + 10 * dcl2y / dcl2) + \",\" + (y2 - dcl2y * (endDistance + 15) / dcl2 - 10 * dcl2x / dcl2)\n                    }\n                    fill=\"#88C0D0\"\n                />\n                {text && (\n                    <g type=\"arrow\"\n                        onDoubleClick={() => { editConnection(nodeId, char) }}\n                        onMouseDown={(event) => { if (event.button === 0) document.addEventListener(\"mousemove\", dragLabel) }}\n                    >\n                        <rect x={((sx + ex) / 2 + cpx) / 2 - 27} y={((sy + ey) / 2 + cpy) / 2 - 10} height=\"20\" width=\"54\" rx=\"5\" ry=\"5\" fill=\"#88C0D0\" />\n                        <text x={((sx + ex) / 2 + cpx) / 2 - 23} y={((sy + ey) / 2 + cpy) / 2 + 5} fontSize=\"15\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\" xmlSpace=\"preserve\">{text}</text>\n                    </g>\n                )}\n            </g>\n        );\n    } else {\n        var sign;\n        const cx1 = x1 - 30;\n        const cx2 = x1 + 30;\n        var cy1;\n        var cy2;\n        x2 = x1 + 20;\n        x1 -= 22;\n        if (curve < 70) {\n            sign = 1;\n            curve = Math.min(curve, 0);\n            cy1 = y1 - 70 + curve * 1.35;\n            cy2 = y1 - 70 + curve * 1.35;\n            y1 = y2 = y1 - 25;\n        } else {\n            sign = -1;\n            curve = Math.max(curve, 125);\n            cy1 = y1 - 100 + curve * 1.35;\n            cy2 = y1 - 100 + curve * 1.35;\n            y1 = y2 = y1 + 25;\n        }\n\n        if (document.selectedNodeId === nodeId && document.selectedConnectionChar === char) {\n            document.arrowCenter = {\n                x: x1 + 20,\n                y: y1 - 63 + 23 * sign + curve\n            }\n        }\n\n        return (\n            <g key={key} type=\"arrow\" onMouseDown={() => {\n                document.selectedNodeId = nodeId;\n                document.selectedConnectionChar = char;\n            }}>\n                <path d={`M ${x1 - 4} ${y1 - 8 * sign} C ${cx1},${cy1} ${cx2},${cy2} ${x2} ${y2}`} style={{ stroke: \"#88C0D0\", strokeWidth: 5, pointerEvents: \"none\" }} fill=\"transparent\" />\n                <polygon points={`${x1},${y1} ${x1 - 13.5},${y1 - 11.9 * sign} ${x1 + 5.78},${y1 - 17.1 * sign}`} fill=\"#88C0D0\" />\n                {text && (\n                    <g type=\"arrow\"\n                        onDoubleClick={() => { editConnection(nodeId, char) }}\n                        onMouseDown={(event) => { if (event.button === 0) document.addEventListener(\"mousemove\", dragLabel) }}\n                    >\n                        <rect x={x1 - 7} y={y1 - 73 + 23 * sign + curve} height=\"20\" width=\"54\" rx=\"5\" ry=\"5\" fill=\"#88C0D0\" />\n                        <text x={x1 - 3} y={y1 - 58 + 23 * sign + curve} fontSize=\"15\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\" xmlSpace=\"preserve\">{text}</text>\n                    </g>\n                )}\n            </g>\n        );\n    }\n}\n\nexport function dragArrow(event) {\n    document.arrowPos = {\n        node: document.selectedNodeId,\n        x1: document.nodes[document.selectedNodeId].x + document.viewportPos.x,\n        y1: document.nodes[document.selectedNodeId].y + document.viewportPos.y,\n        x2: event.pageX,\n        y2: event.pageY\n    }\n    document.update();\n}\n\nexport function dragLabel(event) {\n    const startNode = document.nodes[document.selectedNodeId];\n    const endNode = document.nodes[document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].node]\n    const x1 = startNode.x + document.viewportPos.x;\n    const y1 = startNode.y + document.viewportPos.y;\n    const x2 = endNode.x + document.viewportPos.x;\n    const y2 = endNode.y + document.viewportPos.y;\n\n    if (document.selectedNodeId === document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].node) {\n        document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].arrowCurve = event.pageY - y1 + 64;\n    } else {\n        document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].arrowCurve = Math.round(((y2 - y1) * event.pageX - (x2 - x1) * event.pageY + x2 * y1 - x1 * y2) / Math.sqrt((y2 - y1) ** 2 + (x2 - x1) ** 2));\n    }\n    document.update();\n}","import React from 'react';\nimport { dragArrow } from './arrow';\nimport { removeConnection } from './connection';\n\nexport function renderNode(id) {\n    if (typeof document.nodes[id].x !== \"number\" || typeof document.nodes[id].y !== \"number\")\n        throw TypeError;\n    if (![\"normal\", \"accept\", \"reject\"].includes(document.nodes[id].type))\n        throw TypeError;\n\n    return (\n        <g key={id} id={id} type=\"node\" onMouseDown={() => {\n            document.selectedNodeId = id;\n            document.selectedConnectionChar = \"temp\";\n        }}>\n            <circle cx={document.nodes[id].x + document.viewportPos.x} cy={document.nodes[id].y + document.viewportPos.y} r={document.nodeRadius} fill={\n                (document.nodes[id].type === \"accept\" && (document.state === id ? \"#e3ffcc\" : \"#A3BE8C\")) ||\n                (document.nodes[id].type === \"reject\" && (document.state === id ? \"#ffb3ba\" : \"#BF616A\")) ||\n                (document.state === id ? \"#E5E9F0\" : \"#88C0D0\")\n            } />\n            <text x={document.nodes[id].x + document.viewportPos.x} y={document.nodes[id].y + document.viewportPos.y + 6} textAnchor=\"middle\" fontSize=\"20\" fontFamily=\"mononokiRegular\" fill=\"#2E3440\">{id}</text>\n        </g>\n    );\n}\n\nexport function dragNode(event) {\n    document.nodes[document.selectedNodeId].x = event.pageX - document.nodeOffset.x;\n    document.nodes[document.selectedNodeId].y = event.pageY - document.nodeOffset.y;\n    document.update();\n}\n\nexport function createNode(x, y) {\n    for (var i = 0; i < Object.keys(document.nodes).length; i++) {\n        if (!Object.keys(document.nodes).includes(\"q\" + i))\n            break;\n    }\n    var newId = \"q\" + i;\n    document.nodes[newId] = { x: x, y: y, type: \"normal\", connections: {} }\n    document.update();\n    return newId;\n}\n\nexport function removeNode(nodeId) {\n    for (const node in document.nodes) {\n        for (const char in document.nodes[node].connections) {\n            if (document.nodes[node].connections[char].node === nodeId) {\n                removeConnection(node, char);\n            }\n        }\n    }\n    delete document.nodes[nodeId];\n}\n\nexport function nodeMouseDownHandler(event) {\n    if (event.button === 0 && event.target.parentElement.getAttribute(\"id\") !== document.tempNode) {\n        document.selectedNodeId = event.target.parentElement.getAttribute(\"id\");\n        document.nodeOffset = {\n            x: event.pageX - document.nodes[document.selectedNodeId].x,\n            y: event.pageY - document.nodes[document.selectedNodeId].y\n        };\n        if (!event.shiftKey) {\n            document.draggingNode = true;\n            document.addEventListener(\"mousemove\", dragNode);\n        } else {\n            document.draggingArrow = true;\n            document.addEventListener(\"mousemove\", dragArrow);\n        }\n    }\n}","export function updateTape() {\n    while (-document.tapePos < document.tapeHeight * (document.firstKey + 1)) {\n        document.firstKey--;\n        document.initChars[document.firstKey] = \"\";\n        document.chars[document.firstKey] = \"\";\n    }\n    while (window.innerWidth > document.tapeHeight * document.lastKey + document.tapePos) {\n        document.lastKey++;\n        document.initChars[document.lastKey] = \"\";\n        document.chars[document.lastKey] = \"\";\n    }\n}\n\nexport function dragTape(event) {\n    document.tapePos = event.pageX - document.tapeMouseDownHandler;\n    updateTape();\n    document.update();\n}\n\nexport function tapeMouseDownHandler(event) {\n    if (event.button === 0) {\n        document.tapeMouseDownHandler = event.pageX - document.tapePos;\n        document.addEventListener(\"mousemove\", dragTape);\n    }\n}","import { updateTape } from './tape';\nimport { reset } from './App'\n\nexport function parseJSON(json) {\n    try {\n        json = JSON.parse(json);\n        if (typeof json[\"startState\"] !== \"string\" ||\n            typeof json[\"tape\"][\"string\"] !== \"string\" ||\n            typeof json[\"tape\"][\"startPos\"] !== \"number\") {\n            throw TypeError;\n        }\n        document.startState = json[\"startState\"];\n        document.state = document.startState;\n        document.nodes = json[\"nodes\"];\n        document.initChars = {};\n        document.firstKey = -json[\"tape\"][\"startPos\"];\n        document.firstTapePos = document.firstKey;\n        for (var i = 0; i < json[\"tape\"][\"string\"].length; i++) {\n            document.initChars[i + document.firstTapePos] = json[\"tape\"][\"string\"][i] === \" \" ? \"\" : json[\"tape\"][\"string\"][i];\n        }\n        document.lastKey = i - 1 + document.firstTapePos;\n        document.lastTapePos = document.lastKey;\n        document.startCharId = 0;\n        document.focusedCharId = document.startCharId;\n        updateTape();\n        for (const input of document.querySelectorAll(\"#tape input\")) {\n            input.value = document.initChars[input.getAttribute(\"num\")];\n        }\n    } catch (e) {\n        if (document.firstUpdate) {\n            window.localStorage.removeItem(\"json\");\n            reset();\n        } else {\n            parseJSON(window.localStorage.getItem(\"json\"));\n        }\n    }\n    document.update();\n}\n\nexport function updateJSON() {\n    var tape = \"\";\n    for (var i = document.firstTapePos; i <= document.lastTapePos; i++) {\n        tape += document.initChars[i] === \"\" ? \" \" : document.initChars[i];\n    }\n    const json = JSON.stringify({\n        startState: document.startState,\n        nodes: document.nodes,\n        tape: { string: tape, startPos: -document.firstTapePos + document.startCharId }\n    }, null, 2);\n    try {\n        if (!document.freeEdit)\n            document.getElementById(\"json\").value = json;\n    } catch (e) { }\n    return json;\n}","export function centerViewport() {\n    var minX = window.innerWidth / 2;\n    var maxX = window.innerWidth / 2;\n    var minY = (window.innerHeight - document.tapeHeight) / 2;\n    var maxY = (window.innerHeight - document.tapeHeight) / 2;\n\n    console.log(document.nodes)\n    for (const id in document.nodes) {\n        if (document.nodes[id].x < minX) minX = document.nodes[id].x;\n        if (document.nodes[id].x > maxX) maxX = document.nodes[id].x;\n        if (document.nodes[id].y < minY) minY = document.nodes[id].y;\n        if (document.nodes[id].y > maxY) maxY = document.nodes[id].y;\n    }\n    console.log(minX, maxX)\n    document.viewportPos = {\n        x: window.innerWidth / 2 - (minX + maxX) / 2,\n        y: (window.innerHeight - document.tapeHeight) / 2 - (minY + maxY) / 2\n    }\n    document.update();\n}\n\nexport function pan(event) {\n    document.viewportPos.x = event.pageX - document.offset.x;\n    document.viewportPos.y = event.pageY - document.offset.y;\n    document.update();\n}","import { parseJSON } from './json';\nimport { centerViewport } from './viewport';\n\nexport function readFile(file, callback) {\n    if (!(file instanceof Blob))\n        file = new Blob([file], { type: 'application/json' });\n    var reader = new FileReader();\n    reader.addEventListener('load', (e) => {\n        callback(e.target.result);\n    });\n    reader.readAsBinaryString(file);\n}\n\nexport function upload(event) {\n    if (event.target.files && event.target.files[0]) {\n        readFile(event.target.files[0], (json) => {parseJSON(json); centerViewport();});\n        event.target.value = \"\";\n    }\n}\n\nexport function download() {\n    const file = new Blob([window.localStorage.getItem(\"json\")], { type: 'application/json' });\n    const a = document.createElement(\"a\");\n    const url = URL.createObjectURL(file);\n    a.href = url;\n    a.download = \"automaton.json\";\n    document.body.appendChild(a);\n    a.click();\n    setTimeout(function () {\n        document.body.removeChild(a);\n        window.URL.revokeObjectURL(url);\n    }, 0);\n}","import React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faChevronRight, faChevronLeft, faCopy, faPencilAlt, faCheck, faTimes, faFileImport, faFileExport, faQuestionCircle, faBug } from '@fortawesome/free-solid-svg-icons'\nimport './App.css';\nimport { renderNode, dragNode, createNode, removeNode, nodeMouseDownHandler } from './node';\nimport { renderArrow, dragArrow, dragLabel } from './arrow';\nimport { updateTape, dragTape, tapeMouseDownHandler } from './tape';\nimport { createConnection, editConnection, applyConnectionChanges, cancelConnection, removeConnection } from './connection';\nimport { run, stop, changeSpeed } from './simulation';\nimport { parseJSON, updateJSON } from './json';\nimport { upload, download, readFile } from './file';\nimport { centerViewport, pan } from './viewport';\nimport { binaryCounter } from './examples/binary-counter';\nimport { bouncer } from './examples/bouncer';\n\nexport function reset() {\n  document.tempNode = \"\";\n  document.startCharId = 0;\n  document.startState = \"q0\";\n  document.state = \"q0\";\n  document.draggingNode = false;\n  document.draggingArrow = false;\n  document.editingConnection = false;\n  document.showContextMenu = false;\n  document.focusedCharId = document.startCharId;\n  document.state = document.startState;\n  document.running = false;\n  document.firstTapePos = 0;\n  document.lastTapePos = 0;\n  document.selectedConnectionChar = \"temp\";\n  document.freeEdit = false;\n  document.speed = 1;\n  document.viewportPos = { x: 0, y: 0 };\n\n  if (!window.localStorage.getItem(\"json-pane\"))\n    window.localStorage.setItem(\"json-pane\", window.innerWidth > 1000 ? \"show\" : \"hide\");\n  if (!window.localStorage.getItem(\"help-pane\"))\n    window.localStorage.setItem(\"help-pane\", \"show\");\n\n  document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n\n  document.nodes = {\n    q0: {\n      x: Math.round((window.innerWidth) / 2),\n      y: Math.round((window.innerHeight - document.tapeHeight) / 2),\n      type: \"normal\",\n      connections: {}\n    }\n  }\n\n  document.initChars = {};\n  document.firstKey = 0;\n  for (var i = Math.floor(-(window.innerWidth / 2) / document.tapeHeight); i < 2 + (window.innerWidth / 2) / document.tapeHeight; i++) {\n    if (document.initChars[i] === undefined)\n      document.initChars[i] = \"\";\n  }\n  document.lastKey = i - 1;\n  document.chars = {};\n}\n\nexport default class App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    document.update = () => { this.forceUpdate(); }\n    this.mouseUpHandler = this.mouseUpHandler.bind(this);\n    this.mouseDownHandler = this.mouseDownHandler.bind(this);\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.contextMenuHandler = this.contextMenuHandler.bind(this);\n    this.svgMouseDownHandler = this.svgMouseDownHandler.bind(this);\n\n    document.nodeRadius = 25;\n    document.arrowPos = { x1: 0, y1: 0, x2: 0, y2: 0 };\n    document.contextMenu = { x: 0, y: 0, options: [] }\n    document.tapeHeight = 100;\n    document.firstUpdate = true;\n\n    reset();\n\n    if (window.localStorage.getItem(\"viewport-pos\"))\n      document.viewportPos = JSON.parse(window.localStorage.getItem(\"viewport-pos\"));\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.keyDownHandler);\n    window.addEventListener(\"resize\", () => {\n      document.tapePos = window.innerWidth / 2 - document.tapeHeight / 2 - document.focusedCharId * document.tapeHeight;\n      if (window.innerWidth < 1000)\n        window.localStorage.setItem(\"json-pane\", \"hide\");\n      updateTape();\n      document.update();\n    });\n    document.addEventListener(\"mouseup\", () => {\n      document.removeEventListener(\"mousemove\", dragTape)\n    });\n    document.addEventListener(\"mousedown\", this.mouseDownHandler);\n    document.addEventListener(\"mouseup\", this.mouseUpHandler);\n    document.addEventListener(\"contextmenu\", this.contextMenuHandler);\n    window.addEventListener(\"beforeunload\", () => {\n      window.localStorage.setItem(\"viewport-pos\", JSON.stringify(document.viewportPos));\n    });\n\n    if (window.localStorage.getItem(\"json\"))\n      parseJSON(window.localStorage.getItem(\"json\"));\n  }\n\n  mouseDownHandler(event) {\n    if (event.target.parentElement.id !== \"context-menu\")\n      document.showContextMenu = false;\n    if (document.editingConnection && event.target.className !== \"connection-input\" && event.target.id !== \"connection-box\") {\n      if (applyConnectionChanges()) {\n        document.editingConnection = false;\n      } else {\n        cancelConnection();\n      }\n    }\n    try {\n      if (event.target.parentElement.getAttribute(\"type\") === \"node\") {\n        nodeMouseDownHandler(event);\n      }\n    } catch (e) { }\n    if (event.target.tagName === \"svg\") {\n      this.svgMouseDownHandler(event);\n    }\n    document.tempNode = \"\";\n    document.update();\n  }\n\n  mouseUpHandler(event) {\n    document.removeEventListener(\"mousemove\", dragLabel);\n    document.removeEventListener(\"mousemove\", pan);\n    if (document.draggingNode) document.removeEventListener(\"mousemove\", dragNode);\n    if (document.draggingArrow) {\n      document.removeEventListener(\"mousemove\", dragArrow);\n      if (event.target.parentElement.getAttribute(\"type\") === \"node\") {\n        createConnection(event.target.parentElement.getAttribute(\"id\"));\n      } else {\n        const newId = createNode(event.pageX - document.viewportPos.x, event.pageY - document.viewportPos.y);\n        document.tempNode = newId;\n        createConnection(newId);\n      }\n    }\n    document.draggingNode = false;\n    document.draggingArrow = false;\n    document.arrowPos = { x1: 0, y1: 0, x2: 0, y2: 0 }\n    document.update();\n  }\n\n  svgMouseDownHandler(event) {\n    if (event.button === 0) {\n      document.offset = {\n        x: event.pageX - document.viewportPos.x,\n        y: event.pageY - document.viewportPos.y\n      };\n      document.addEventListener(\"mousemove\", pan);\n    }\n  }\n\n  keyDownHandler(event) {\n    if (document.editingConnection) {\n      if (event.key === \"Enter\" && applyConnectionChanges()) {\n        document.editingConnection = false;\n        document.update();\n      } else if (event.key === \"Escape\") {\n        cancelConnection();\n      }\n    }\n\n    if (document.freeEdit && event.key === \"Escape\") {\n      document.freeEdit = false;\n      document.update();\n    }\n\n    if (document.activeElement.tagName !== \"INPUT\" && document.activeElement.tagName !== \"TEXTAREA\") {\n      if (event.key === \"j\") {\n        window.localStorage.setItem(\"json-pane\", window.localStorage.getItem(\"json-pane\") === \"show\" ? \"hide\" : \"show\");\n        document.freeEdit = false;\n        document.update();\n      }\n\n      if (event.key === \"h\") {\n        window.localStorage.setItem(\"help-pane\", window.localStorage.getItem(\"help-pane\") === \"show\" ? \"hide\" : \"show\");\n        document.update();\n      }\n\n      if (event.key === \" \") {\n        if (document.running)\n          stop();\n        else\n          run();\n      }\n\n      if (document.running && event.key === \"Escape\")\n        stop();\n\n      if (event.ctrlKey && event.key === \"c\") {\n        navigator.clipboard.writeText(document.getElementById(\"json\").value);\n      }\n\n    }\n\n    if (event.ctrlKey && event.key === \"s\") {\n      event.preventDefault();\n      document.freeEdit = false;\n      parseJSON(document.getElementById(\"json\").value);\n    }\n  }\n\n  contextMenuHandler(event) {\n    document.contextMenu = {\n      x: event.pageX,\n      y: event.pageY,\n      options: []\n    }\n    try {\n      if (event.target.tagName === \"svg\") { // Background\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { createNode(document.contextMenu.x - document.viewportPos.x, document.contextMenu.y - document.viewportPos.y) }}>Add node</p>\n        ];\n      } else if (event.target.parentElement.getAttribute(\"type\") === \"arrow\") { // Connection\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { editConnection(document.selectedNodeId, document.selectedConnectionChar) }}>Edit connection</p>,\n          <p key=\"1\" onClick={() => { removeConnection(document.selectedNodeId, document.selectedConnectionChar) }}>Remove connection</p>\n        ];\n      } else if (event.target.parentElement.getAttribute(\"type\") === \"node\") { // Node\n        event.preventDefault();\n        document.showContextMenu = true;\n        document.contextMenu.options = [\n          <p key=\"0\" onClick={() => { removeNode(document.selectedNodeId) }}>Remove node</p>,\n          (document.startState !== document.selectedNodeId) && <p key=\"1\" onClick={() => { document.startState = document.state = document.selectedNodeId }}>Define as start state</p>,\n          (document.nodes[document.selectedNodeId].type !== \"normal\") && <p key=\"2\" onClick={() => { document.nodes[document.selectedNodeId].type = \"normal\" }}>Define as normal state</p>,\n          (document.nodes[document.selectedNodeId].type !== \"accept\") && <p key=\"3\" onClick={() => { document.nodes[document.selectedNodeId].type = \"accept\" }}>Define as accept state</p>,\n          (document.nodes[document.selectedNodeId].type !== \"reject\") && <p key=\"4\" onClick={() => { document.nodes[document.selectedNodeId].type = \"reject\" }}>Define as reject state</p>,\n        ];\n      }\n    } catch (e) { }\n    document.update();\n  }\n\n  render() {\n    var html = (\n      <div className=\"App\">\n        <header className=\"App-header\"></header>\n      </div>\n    );\n    try {\n      html = (\n        <div className=\"App\">\n          <header className=\"App-header\">\n            <svg style={{ height: \"100%\", width: \"100%\", position: \"absolute\" }}>\n              {Object.keys(document.nodes).map((id) => {\n                return Object.keys(document.nodes[id].connections).map((char, key) => {\n                  if (\n                    (char.length > 1 && char !== \"temp\") ||\n                    typeof document.nodes[id].connections[char].newChar !== \"string\" ||\n                    document.nodes[id].connections[char].newChar.length > 1 ||\n                    typeof document.nodes[id].connections[char].move !== \"string\" ||\n                    typeof document.nodes[id].connections[char].arrowCurve !== \"number\" ||\n                    ![\"L\", \"R\", \"S\"].includes(document.nodes[id].connections[char].move)\n                  )\n                    throw TypeError;\n\n                  return renderArrow(\n                    key,\n                    id,\n                    char,\n                    document.nodes[id].x + document.viewportPos.x,\n                    document.nodes[id].y + document.viewportPos.y,\n                    document.nodes[document.nodes[id].connections[char].node].x + document.viewportPos.x,\n                    document.nodes[document.nodes[id].connections[char].node].y + document.viewportPos.y,\n                    30,\n                    (char === \"temp\") ? \"\" : (char ? char : \" \") + \"→\" + (document.nodes[id].connections[char].newChar ? document.nodes[id].connections[char].newChar : \" \") + \",\" + document.nodes[id].connections[char].move\n                  );\n                });\n              })}\n              {document.draggingArrow && renderArrow(\"user\", \"\", \"\", document.arrowPos.x1, document.arrowPos.y1, document.arrowPos.x2, document.arrowPos.y2)}\n              {Object.keys(document.nodes).map((id) => renderNode(id))}\n            </svg>\n            <div className=\"topbar\">\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }} onClick={() => { window.localStorage.setItem(\"help-pane\", window.localStorage.getItem(\"help-pane\") === \"show\" ? \"hide\" : \"show\"); document.update(); }}>\n                <FontAwesomeIcon icon={faQuestionCircle} />\n                <span className=\"tooltip\">Help</span>\n              </div>\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }} onClick={() => { window.open(\"https://github.com/rodrigohpalmeirim/automaton-simulator/issues\", \"_blank\"); }}>\n                <FontAwesomeIcon icon={faBug} />\n                <span className=\"tooltip\">Report issues</span>\n              </div>\n              <div style={{ flexGrow: 1 }}></div>\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }}>\n                <input type=\"file\" text=\"\" style={{ position: \"absolute\", width: 50, height: 50, marginLeft: -10, opacity: 0, cursor: \"pointer\" }} onChange={(event) => { upload(event) }} />\n                <FontAwesomeIcon icon={faFileImport} />\n                <span className=\"tooltip\" style={{ transform: \"translate(calc(-50% - 10px), 200%)\" }}>Import</span>\n              </div>\n              <div className=\"toolbar-button\" style={{ width: 50, height: 50 }} onClick={() => download()}>\n                <FontAwesomeIcon icon={faFileExport} />\n                <span className=\"tooltip\" style={{ transform: \"translate(calc(-50% - 22px), 200%)\" }}>Export</span>\n              </div>\n            </div>\n            <div id=\"tape\" style={{ height: document.tapeHeight }} onMouseDown={tapeMouseDownHandler}>\n              {\n                Object.keys(document.initChars).map((id) => {\n                  if (-document.tapePos < document.tapeHeight * (Number(id) + 2) && window.innerWidth > document.tapeHeight * (Number(id) - 1) + document.tapePos) {\n                    return (<input key={id} num={id} style={{\n                      height: document.tapeHeight,\n                      width: document.tapeHeight,\n                      backgroundColor: id % 2 ? \"#434C5E\" : \"#3B4252\",\n                      position: \"absolute\",\n                      bottom: 0,\n                      left: id * document.tapeHeight + document.tapePos,\n                      fontSize: document.tapeHeight / 2,\n                      transition: document.running ? 0.5 / document.speed + \"s\" : 0 + \"s\",\n                    }} maxLength=\"1\" onInput={(event) => {\n                      if (event.target.value === \" \")\n                        event.target.value = \"␣\";\n                      document.initChars[id] = event.target.value;\n                      document.firstTapePos = Math.min(id, document.firstTapePos);\n                      document.lastTapePos = Math.max(id, document.lastTapePos);\n                      updateJSON();\n                    }} defaultValue={document.running ? document.chars[id] : document.initChars[id]} />\n                    )\n                  }\n                })\n              }\n              <div id=\"cursor\" style={{\n                height: document.tapeHeight - 20,\n                width: document.tapeHeight - 20,\n                borderColor: !document.stalled ? \"#88C0D0\" : (\n                  (document.nodes[document.state].type === \"accept\" && \"#A3BE8C\") ||\n                  (document.nodes[document.state].type === \"reject\" && \"#BF616A\") ||\n                  \"#E5E9F0\"\n                ),\n                left: document.running ? window.innerWidth / 2 - document.tapeHeight / 2 : document.focusedCharId * document.tapeHeight + document.tapePos,\n                transition: document.running ? 0.5 / document.speed + \"s\" : 0 + \"s\",\n              }} />\n            </div>\n            {!document.running && (\n              <div className=\"button\" style={{ bottom: document.tapeHeight + 20 }} onClick={() => run()}>\n                <svg width=\"100%\" height=\"100%\">\n                  <polygon points={\"12,10 30,20 12,30\"} fill=\"#2E3440\" />\n                </svg>\n              </div>\n            )}\n            <div id=\"speed-controls\" style={{ bottom: document.tapeHeight + 20, zIndex: document.running ? 2 : 0 }}>\n              <div style={document.speed === 0.5 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(0.5); }}>×½</div>\n              <div style={document.speed === 1 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(1); }}>×1</div>\n              <div style={document.speed === 2 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(2); }}>×2</div>\n              <div style={document.speed === 5 ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(5); }}>×5</div>\n              <div style={document.speed === Infinity ? { backgroundColor: \"#88C0D0\", color: \"#2E3440\" } : {}} onClick={() => { changeSpeed(Infinity); }}>×∞</div>\n            </div>\n            {document.editingConnection && (\n              <form id=\"connection-box\" style={{ left: document.arrowCenter.x, top: document.arrowCenter.y }}>\n                <input className=\"connection-input\" type=\"text\" name=\"char\" maxLength=\"1\" autoFocus\n                  onFocus={(event) => { event.target.select(); }}\n                  onInput={(event) => { event.target.nextElementSibling.focus(); if (event.target.value === \" \") event.target.value = \"␣\" }}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.selectedConnectionChar : \"\"}\n                /> → <input className=\"connection-input\" type=\"text\" name=\"newChar\" maxLength=\"1\"\n                  onFocus={(event) => { event.target.select(); }}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].newChar : \"\"}\n                  onInput={(event) => { event.target.nextElementSibling.focus(); if (event.target.value === \" \") event.target.value = \"␣\" }}\n                />, <input className=\"connection-input\" type=\"text\" name=\"move\" maxLength=\"1\"\n                  onFocus={(event) => { event.target.select(); }}\n                  defaultValue={(document.selectedConnectionChar !== \"temp\") ? document.nodes[document.selectedNodeId].connections[document.selectedConnectionChar].move : \"\"}\n                />\n              </form>\n            )}\n            <div className=\"pane\" style={{ height: Math.min(420, window.innerHeight - 120 - document.tapeHeight), width: 350, top: 100, left: window.localStorage.getItem(\"help-pane\") === \"show\" ? 20 : -400 }}>\n              <div className=\"toolbar\">\n                <span style={{ flexGrow: 1 }}>Help</span>\n                <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"help-pane\", \"hide\"); document.update(); }}>\n                  <FontAwesomeIcon icon={faTimes} />\n                </div>\n              </div>\n              <div className=\"pane-content\">\n                <p style={{ marginTop: 0 }}>Create connections by pressing <span className=\"key\">Shift</span> and dragging from a node.</p>\n                <p>Connections hold 3 values:<br />\n                  - the current character<br />\n                  - the replacement character<br />\n                  - the movement instruction\n                </p>\n                <p>The movement instructions are:<br />\n                  - 'R' (right)<br />\n                  - 'L' (left)<br />\n                  - 'S' (stay)\n                </p>\n                <p>Currently, there cannot be two connections with the same character comming from the same node.</p>\n                <p>Learn about Turing machines <a className=\"link\" href=\"https://simple.m.wikipedia.org/wiki/Turing_machine\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n                <p>Curve the arrows by dragging the label.</p>\n                <p>On the right side there is the JSON pane which you can toggle by pressing <span className=\"key\">J</span>. It contains all the information that defines the automaton and the tape. Unless the 'free edit' mode is enabled, it ignores any input that would break the JSON or the automaton.</p>\n                <p>Start the simulation by pressing <span className=\"key\">Space</span> and control its speed using the buttons on the bottom right corner.</p>\n                <p>Here are some examples:<br />\n                  - <span className=\"link\" onClick={() => readFile(bouncer, (json) => {parseJSON(json); centerViewport();})}>Bouncer</span><br />\n                  - <span className=\"link\" onClick={() => readFile(binaryCounter, (json) => {parseJSON(json); centerViewport();})}>Binary counter</span>\n                </p>\n              </div>\n            </div>\n            <div className=\"blocker\" style={{ opacity: document.freeEdit ? 0.5 : 0, pointerEvents: document.freeEdit ? \"auto\" : \"none\" }} />\n            <div className=\"pane\" style={{\n              top: 100,\n              height: window.innerHeight - document.tapeHeight - 200,\n              right: window.localStorage.getItem(\"json-pane\") === \"show\" ? 20 : -360,\n            }}>\n              <div className=\"toolbar\">\n                {window.localStorage.getItem(\"json-pane\") === \"show\" ?\n                  <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"json-pane\", \"hide\"); document.freeEdit = false; document.update(); }}>\n                    <FontAwesomeIcon icon={faChevronRight} />\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => { window.localStorage.setItem(\"json-pane\", \"show\"); document.update(); }}>\n                    <FontAwesomeIcon icon={faChevronLeft} />\n                  </div>\n                }\n                <span style={{ flexGrow: 1 }}>JSON</span>\n                {document.freeEdit ?\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = false; document.update(); }}>\n                    <FontAwesomeIcon icon={faTimes} />\n                    <span className=\"tooltip\">Cancel</span>\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = true; document.update(); }}>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                    <span className=\"tooltip\">Free edit</span>\n                  </div>\n                }\n                {document.freeEdit ?\n                  <div className=\"toolbar-button\" onClick={() => { document.freeEdit = false; parseJSON(document.getElementById(\"json\").value); }}>\n                    <FontAwesomeIcon icon={faCheck} />\n                    <span className=\"tooltip\">Apply</span>\n                  </div> :\n                  <div className=\"toolbar-button\" onClick={() => { navigator.clipboard.writeText(document.getElementById(\"json\").value); }}>\n                    <FontAwesomeIcon icon={faCopy} />\n                    <span className=\"tooltip\">Copy</span>\n                  </div>\n                }\n              </div>\n              <textarea className=\"pane-content\" id=\"json\" onInput={() => { if (!document.freeEdit) parseJSON(document.getElementById(\"json\").value) }} defaultValue={updateJSON()} spellCheck=\"false\" />\n            </div>\n            <div className=\"blocker\" style={{ opacity: 0, pointerEvents: document.running ? \"auto\" : \"none\" }} />\n            {document.running && (\n              <div className=\"button\" style={{ bottom: document.tapeHeight + 20 }} onClick={() => stop()}>\n                <svg width=\"100%\" height=\"100%\">\n                  <polygon points={\"12,12 28,12 28,28 12,28\"} fill=\"#2E3440\" />\n                </svg>\n              </div>\n            )}\n            {document.showContextMenu && (\n              <div style={{ left: document.contextMenu.x, top: document.contextMenu.y }} id=\"context-menu\" onClick={() => { document.showContextMenu = false; document.update(); }}>\n                {document.contextMenu.options.map((option) => option)}\n              </div>\n            )}\n          </header>\n        </div>\n      );\n    } catch (e) {\n      if (document.firstUpdate) {\n        window.localStorage.removeItem(\"json\");\n        reset();\n        document.update();\n      } else {\n        parseJSON(window.localStorage.getItem(\"json\"));\n      }\n    }\n    return html;\n  }\n\n  componentDidUpdate() {\n    window.localStorage.setItem(\"json\", updateJSON());\n    document.firstUpdate = false;\n  }\n}","export const bouncer = `{\n  \"startState\": \"q0\",\n  \"nodes\": {\n      \"q0\": {\n      \"x\": 500,\n      \"y\": 350,\n      \"type\": \"normal\",\n      \"connections\": {\n          \"\": {\n          \"node\": \"q0\",\n          \"newChar\": \"\",\n          \"move\": \"L\",\n          \"arrowCurve\": 0\n          },\n          \"|\": {\n          \"node\": \"q1\",\n          \"newChar\": \"|\",\n          \"move\": \"R\",\n          \"arrowCurve\": 25\n          }\n      }\n      },\n      \"q1\": {\n      \"x\": 750,\n      \"y\": 350,\n      \"type\": \"normal\",\n      \"connections\": {\n          \"|\": {\n          \"node\": \"q0\",\n          \"newChar\": \"|\",\n          \"move\": \"L\",\n          \"arrowCurve\": 25\n          },\n          \"\": {\n          \"node\": \"q1\",\n          \"newChar\": \"\",\n          \"move\": \"R\",\n          \"arrowCurve\": 0\n          }\n      }\n      }\n  },\n  \"tape\": {\n      \"string\": \"|     |\",\n      \"startPos\": 3\n  }\n}`","export const binaryCounter = `{\n  \"startState\": \"q0\",\n  \"nodes\": {\n    \"q0\": {\n      \"x\": 500,\n      \"y\": 350,\n      \"type\": \"normal\",\n      \"connections\": {\n        \"0\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 50\n        },\n        \"1\": {\n          \"node\": \"q0\",\n          \"newChar\": \"0\",\n          \"move\": \"L\",\n          \"arrowCurve\": 0\n        },\n        \"\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 25\n        }\n      }\n    },\n    \"q1\": {\n      \"x\": 800,\n      \"y\": 350,\n      \"type\": \"normal\",\n      \"connections\": {\n        \"0\": {\n          \"node\": \"q1\",\n          \"newChar\": \"0\",\n          \"move\": \"R\",\n          \"arrowCurve\": 125\n        },\n        \"1\": {\n          \"node\": \"q1\",\n          \"newChar\": \"1\",\n          \"move\": \"R\",\n          \"arrowCurve\": 0\n        },\n        \"\": {\n          \"node\": \"q0\",\n          \"newChar\": \"\",\n          \"move\": \"L\",\n          \"arrowCurve\": 25\n        }\n      }\n    }\n  },\n  \"tape\": {\n    \"string\": \"   \",\n    \"startPos\": 0\n  }\n}`","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}